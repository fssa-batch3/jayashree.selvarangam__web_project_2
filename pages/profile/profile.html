<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>coffee shop </title>

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css"
            integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w=="
            crossorigin="anonymous" referrerpolicy="no-referrer">
        <link rel="stylesheet" href="../../assets/css/profile.css">
        <link rel="stylesheet" href="../../assets/css/header.css">
        <link rel="stylesheet" href="../../assets/css/footer.css ">

    </head>
    <body>
        <!-- header section starts  -->
        <!-- <header class="header">
            <input type="checkbox" name="" id="toggler">
            <label for="toggler" class="fas fa-bars"></label>
            <a href="../../index.html" class="logo"> Coffee<i class="fas fa-mug-hot"></i> </a>
        
            <nav class="navbar">
            <a href="../../index.html">Home</a>
            <a href="../../pages/order/order-bestseller.html">Order</a>
            <a href="../../pages/payment/payment.html">Pay</a>
            <a href="../../pages/My orders/myorders.html">My orders</a>
            <a href="../../pages/blogs/blog.html">Blogs</a>--> 
        <!-- </nav>
            <div class="icons">
            <a href="../../pages/add to cart/addtocart.html" class="fas fa-shopping-cart"></a>
            <a href="../../pages/profile/profile.html" class="fas fa-user"></a>
            </div>
            <a href="../../pages/login/login.html" class="btn">Login</a>
        
            </header> --> 
        <section class="profile" id="profile">

            <h1 class="heading">
                <i class="fa-solid fa-circle-user"></i> Profile 
            </h1>
         
            <form action="">
                <!-- <i class="fa-solid fa-trash" id="delete"></i> -->
                <label>Name:</label>
                <input type="text" id="user_name" class="box" readonly>
                <label>Email_id:</label>
                <input type="email" id="user_email" class="box" readonly>
                <label>Password:</label>
                <input type="password" id="user_password"class="box" readonly>
                <label>Mobile number:</label>
                <input type="text" id="user_mobilenumber" class="box" readonly>
                
                <!-- <a href="../../pages/profile/profile_edit.html"><input type="submit" value="Edit" class="btn"></a>
                    <span class="save"> -->
                <button type="button"class="btn" id="edit1">edit
                </button>
                <!-- <button  class="btn" id="delete" >delete profile
                    </button>  -->
                <button type="button" class="btn" id="save" style="display: none">Save
                </button>

                <span class="save1"> 
                    <a href="../../index.html">
                        <button class="btn" type="button" id="logout">logout
                        </button></a> </span> 
        
            </form>
        </section>

    </body>
    <script src="./pages/order/header.js"></script>
    <script>
//   const name= localStorage.getItem("name");
//   const email= localStorage.getItem("email");
//   const password= localStorage.getItem("password");
//   const number= localStorage.getItem("mobile_Number");
//   console.log(name);
//   console.log(email);
//   console.log(password);
//   console.log(number);

//   // document.getElementById("name").value= name
//   // document.getElementById("email").value= email
//   // document.getElementById("password").value= password
//   // document.getElementById("mobilenumber").value= number -->

// let user_details = JSON.parse(window.localStorage.getItem("user_details"));

//       document.getElementById("user_name").value = user_details[0]["user_name"];
//       document.getElementById("user_email").value = user_details[0]["user_email"];
//       document.getElementById("user_password").value = user_details[0]["user_password"];
//       document.getElementById("user_mobilenumber").value = user_details[0]["user_mobile"];
const user_data = JSON.parse(localStorage.getItem("user_data"));
const unique1 = user_data.user_email;
localStorage.setItem("unique_id", JSON.stringify(unique1));
const user_list = JSON.parse(localStorage.getItem("user_list"));
const unique = JSON.parse(localStorage.getItem("unique_id"));
function findPlayer(e) {
  return e.user_email == unique;
}
person_data = user_list.find(findPlayer);

document.getElementById("user_name").value = person_data.user_name;
document.getElementById("user_email").value = person_data.user_email;
document.getElementById("user_password").value = person_data.user_password;
document.getElementById("user_mobilenumber").value = person_data.user_mobile;

function update(e) {
  const user_data = JSON.parse(localStorage.getItem("user_data"));
  console.log(user_data);
  const unique1 = user_data.user_email;
  localStorage.setItem("unique", JSON.stringify(unique1));
  const unique = JSON.parse(localStorage.getItem("unique"));
  const user_list = JSON.parse(localStorage.getItem("user_list"));
  function findPlayer(e) {
    return e.user_email == unique;
  }
  person_data = user_list.find(findPlayer);

  // getting the updated data from the input field
  const up_name = document.getElementById("user_name").value;
  const up_mobile = document.getElementById("user_mobilenumber").value;
  const up_email = document.getElementById("user_email").value;
  const up_password = document.getElementById("user_password").value;
  // paste the updated data to the correct object
  person_data.user_name = up_name;
  person_data.user_mobilenumber = up_mobile;
  // again paste it to the
  localStorage.setItem("user_list", JSON.stringify(user_list));
  console.log(userData);
  location.reload();
}

function edit(e) {
  window.location.href = "../../pages/profile/profile_edit.html";
}

// let del1 = document.getElementById('delete');
// del1.addEventListener('click',function(){
// let user_data = JSON.parse(localStorage.getItem('user_data'));
// let unique1 = user_data["user_email"];
// localStorage.setItem('unique',JSON.stringify(unique1));
// let unique=JSON.parse(localStorage.getItem('unique'));
// console.log(unique)
// let user_list = JSON.parse(localStorage.getItem('user_list'));
// function findPlayer(e) {
//     return e.user_email == unique ;
// }
// person_data = user_list.find(findPlayer);
// const indexOfUser = user_list.indexOf(person_data);
// user_list.splice(indexOfUser,1);
// console.log(indexOfUser);
// localStorage.setItem("user_list",JSON.stringify(user_list));
// location.reload();
// function logOut(e){
//     localStorage.setItem('user_data'," ");
//     window.location.href="../../index.html";
// }
// logOut(e);
// // localStorage.
// })

//////////////////////////////////////////////////////
// function del(e){
//                 let unique1 = user_data["user_email"];
//                 localStorage.setItem('unique',JSON.stringify(unique1))
//                 let unique=JSON.parse(localStorage.getItem('unique'))
//                 let user_data = JSON.parse(localStorage.getItem('user_data'));

//                 let user_list = JSON.parse(localStorage.getItem('user_list'))
//                 function findPlayer(e) {
//                     return e.user_email == unique ;
//                 }
// person_data = user_list.find(findPlayer);

// const indexOfUser = user_list.indexOf(person_data);
// user_list.splice(indexOfUser,1);

// console.log(indexOfUser);
// localStorage.setItem("user_list",JSON.stringify(user_list));
// // localStorage.

// }

const edit1 = document.querySelector("#edit1");
edit1.addEventListener("click", findReadonly);

// save button
const save = document.querySelector("#save");
save.addEventListener("click", update);
save.addEventListener("click", findReadonly1);

function findReadonly(e) {
  document.getElementById("user_name").removeAttribute("readonly");
  document.getElementById("user_email").removeAttribute("readonly");
  document.getElementById("user_password").removeAttribute("readonly");
  document.getElementById("user_mobilenumber").removeAttribute("readonly");
  document.querySelector("#save").removeAttribute("style", "display:flex");
  document.querySelector("#edit1").setAttribute("style", "display:none");
  const head = document.querySelector(".heading");
  head.innerHTML = "My Profile-Edit";
}

function findReadonly1(e) {
  document.getElementById("user_name").setAttribute("readonly", "true");
  document.getElementById("user_email").setAttribute("readonly", "true");
  document.getElementById("user_password").setAttribute("readonly", "true");
  document.getElementById("user_mobilenumber").setAttribute("readonly", "true");
  document.querySelector("#save").setAttribute("style", "display:none");
  document
    .querySelector("#edit1")
    .setAttribute("style", "display:inline-block");
  const head = document.querySelector(".heading");
  head.innerHTML = "My Profile";
  // location.reload();
}

//   let user_info = JSON.parse(window.localStorage.getItem("user_info"));
//   console.log(user_info);
//   document.getElementById("user_name").value = user_info[0]["user_name"];
//   document.getElementById("user_email").value = user_info[0]["user_email"];
//   document.getElementById("user_password").value = user_info[0]["user_password"];
//   document.getElementById("user_mobilenumber").value = user_info[0]["user_mobile"];
</script>
    <script src="../../pages/order/header.js"></script>
        
</html>