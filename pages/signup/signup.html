<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>coffee shop </title>
   
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
        <link rel="stylesheet" 
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css">
   
        <link rel="stylesheet" href="../../assets/css/signup.css">
        <link rel="stylesheet" href="../../assets/css/header.css">
        <link rel="stylesheet" href="../../assets/css/footer.css ">

    </head>
    <body>
        <!-- header section starts  -->
        <!-- <header class="header">
            <input type="checkbox" name="" id="toggler">
            <label for="toggler" class="fas fa-bars"></label>
            <a href="../../index.html" class="logo"> Coffee <i class="fas fa-mug-hot"></i> </a>

            <nav class="navbar">
            <a href="../../index.html">Home</a>
            <a href="../../pages/order/order-bestseller.html">Order</a>
            <a href="../../pages/payment/payment.html">Pay</a>
            <a href="../../pages/My orders/myorders.html">My orders</a>
            <a href="../../pages/blogs/blog.html">Blogs</a>
            </nav>
            <div class="icons">
            <a href="../../pages/add to cart/addtocart.html" class="fas fa-shopping-cart"></a>
            <a href="../../pages/profile/profile.html" class="fas fa-user"></a>
            </div>
            <a href="../../pages/login/login.html" class="btn">Login</a>

            </header> -->

        <section class="profile" id="profile">

            <h1 class="heading">
                <i class="fa-solid fa-circle-user"></i> Signup 
            </h1>
         
            <form role="form" onsubmit="signUP(event)">
                <input type="text" id="name" title="Use firstletter between (A-Z) and dont leave space in between" pattern="^[a-zA-Z][a-zA-Z0-9-_\.]{1,15}$" placeholder="Name" class="box" required="true">
            
                <input type="email" pattern="^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$" id="email" placeholder="Email-Id" class="box" required="true">

                <input type="password" id="password" title="Use (UpperCase, LowerCase, Number/SpecialChar and min 8 Chars)" placeholder="Password" pattern="(?=^.{8,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$" placeholder="Password" class="box" required="true">

                <input type="password" id="confirm_password" title="Use (UpperCase, LowerCase, Number/SpecialChar and min 8 Chars)" placeholder="confirm Password" pattern="(?=^.{8,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$"placeholder="Confirm-password" class="box" required="true">
              
                <textarea type="text" id="address" placeholder="address" title="Use only lowercase(abc...z)" pattern="[a-z]{3,}" class="box" required="true"></textarea>

                <input pattern="[0-9]{10}" type="tel" title="Please enter a valid 10 digit mobile number." id="mobilenumber" title="Enter 10 number only" placeholder="Mobile number" class="box" required="true">
                <button type="submit" class="btn"> Signup </button>
                <div>
                    <p class="sign">
                        If your are already a customer <a href="../../pages/login/login.html">Login</a>
                    </p>
                </div>
                <!--                
                    <input type="text"  id="name" title="Use firstletter between (A-Z) and min 15 character" pattern="^[a-zA-Z][a-zA-Z0-9-_\.]{1,15}$" placeholder="Name" class="box" >
                    <p class="wrong_password1"></p> `
                -->
                <!--             
                    <input type="email"    id="email" placeholder="Email-Id"  class="box" >
                    <p class="wrong_password2"></p>
                    <input type="password"  id="password" title="Use (UpperCase, LowerCase, Number/SpecialChar and min 8 Chars)" placeholder="Password" pattern="(?=^.{8,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$"   placeholder="Password" class="box">
                    <p class="wrong_password3"></p>
                    <input type="password" id="confirm_password" title="Use (UpperCase, LowerCase, Number/SpecialChar and min 8 Chars)" placeholder="confirm Password" pattern="(?=^.{8,}$)((?=.*\d)|(?=.*\W+))(?![.\n])(?=.*[A-Z])(?=.*[a-z]).*$"placeholder="Confirm-password" class="box" >
                    <p class="wrong_password4"></p>
                    <textarea type="text" id="address" placeholder="address"  title="Use only lowercase(abc...z)" pattern="[a-z]{3,}" class="box" ></textarea>
                    <p class="wrong_password6"></p>
                    <input  pattern="[0-9]{10}" type="tel" title="Please enter a valid 10 digit mobile number." id="mobilenumber"  title="Enter 10 number only" placeholder="Mobile number" class="box">
                    <p class="wrong_password"></p>
                    <p class="wrong_password123"></p>
                    <button  type="submit" class="btn"> Signup </button> -->
                <!-- <div class="form-control">
                    <input type="text" id="name" placeholder="Name" class="box" >
                    <small></small>
                    </div>

                    <div class="form-control">
                    <input type="email" id="email"  placeholder="Email-Id"  class="box" >
                    <small></small>
                    </div>
               
                    <div class="form-control">
                    <input type="password"  id="password"  maxlength="6" title="Must contain 6 characters only"   placeholder="Password" class="box" >
                    <small></small>
                    </div>
                
                    <div class="form-control">
                    <input type="password" id="confirm_password" placeholder="Confirm-password" maxlength="6" class="box" >
                    <small></small>
                    </div>

                    <div class="form-control">
                    <input type="password" id="confirm_password" placeholder="Confirm-password" maxlength="6" class="box" required="true"> -->
                <!-- <textarea type="text" id="address" placeholder="address"  class="box" ></textarea>
                    <small></small>
                    </div>
                
                    <div class="form-control">
                    <input type="tel"  id="mobilenumber"  title="Enter 10 number only" placeholder="Mobile number" class="box" >
                    <small></small>
                    </div>
             
                    <button  type="submit" class="btn"> Signup </button>
                    <div>
                    <p class="sign">If your are already a customer <a href="../../pages/login/login.html">Login</a></p>
                    </div> --> 

                <!-- pattern ="^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$." -->
        
            </form>
        </section>
        <!-- pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$" -->
    </body>
        
    <script src="https://cdn.jsdelivr.net/npm/uuid@8.3.2/dist/umd/uuidv4.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/uuid@8.3.2/dist/umd/uuidv4.min.js"></script>
    <script>
            // let users=[];
            // function submit(){
            //     const  userName = document.getElementById("name").value;
            //     const  email = document.getElementById("email").value;
            //     const  password = document.getElementById("password").value;
            //     const  confirmPassword = document.getElementById("confirm_password").value;
            //     const  mobileNumber = document.getElementById("mobilenumber").value;

            //     // console.log(userName);
            //     // console.log(email);
            //     // console.log(password);
            //     // console.log( confirmPassword);
            //     // console.log(mobileNumber);
            // //    window.location.href="../../index.html";
            //     // localStorage.setItem("name",userName);
            //     // localStorage.setItem("email",email);
            //     // localStorage.setItem("password",password);
            //     // localStorage.setItem("confirm_Password",confirmPassword);
            //     // localStorage.setItem("mobile_Number",mobileNumber);
            // users.push({userName ,email ,password,confirmPassword,mobileNumber});
            // const userData=JSON.stringfy(users);
            // localStorage.setItem("users",userData);
            // }
// code for storing data in the local storage
///////////////////////////////////////////////////
// const signUP1 = (e) => {
//   e.preventDefault();
// const user_name = document.getElementById("name");
// const user_email = document.getElementById("email");
// const user_password = document.getElementById("password");
// const user_confirm_password=document.getElementById("confirm_password");
// const user_mobile = document.getElementById("mobilenumber");
// const user_address = document.getElementById("address").value;

//   let full_namevalue = user_name.value.trim();
// const emailvalue = user_email.value.trim();
// const mobile_numbervalue = user_mobile.value.trim();
// const passwordvalue = user_password.value;
// const re_enter_passwordvalue = user_confirm_password.value;

// const full_namespace = /\s/;
// const fullnamepattern = /^[a-zA-Z]+$/;
// const emailpattern = /^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;
// const mobilenumberpattern = /^[1-9]\d{9}$/;

// const a = JSON.parse(localStorage.getItem('user_list'))||[];
//   let exist =
//     a.length &&
//                 JSON.parse(localStorage.getItem("user_list")).some(
//       (data) => data.email == emailvalue
//     );

//   if (full_namevalue == "") {
//     setErrorFor(user_name, "Enter your Fullname");
//   }

//   if (full_namespace.test(full_namevalue)) {
//     setErrorFor(user_name, "name must not contain spaces");
//   }

//   if (fullnamepattern.test(full_namevalue)) {
//     setSuccessFor(user_name);
//   }

//   if (emailvalue == "") {
//     setErrorFor(user_email, "enter your email address");
//   } else if (!emailpattern.test(emailvalue)) {
//     setErrorFor(user_email, "Please enter a valid email address");
//   } else if (exist) {
//     setErrorFor(
//       user_email,
//       "Sorry the User already Exist!! \n Try with different Email'"
//     );
//   } else {
//     setSuccessFor(user_email);
//   }
//   if (mobile_numbervalue == "") {
//     setErrorFor(user_mobile, "Enter your mobile number");
//   } else if (!mobilenumberpattern.test(mobile_numbervalue)) {
//     setErrorFor(user_mobile, "Please enter a valid mobilenumber");
//   } else {
//     setSuccessFor(user_mobile);
//   }
//   if (passwordvalue == "") {
//     setErrorFor(user_password, "Enter the password");
//   } else if (passwordvalue.length < 6) {
//     setErrorFor(user_password, "password must contain at least 6 characters");
//   } else {
//     setSuccessFor(user_password);
//   }
//   if (re_enter_passwordvalue == "") {
//     setErrorFor(user_confirm_password, "Enter the password");
//   }
//   if (re_enter_passwordvalue !== passwordvalue) {
//     setErrorFor(user_confirm_password, "password must be the same");
//   }
//   if (re_enter_passwordvalue == passwordvalue) {
//     setSuccessFor(user_confirm_password);
//   }

//   function setErrorFor(input, message) {
//     const formcontrol = input.parentElement;
//     console.log(formcontrol);
//     const small_msg = formcontrol.querySelector("small");
//     console.log(small_msg);

//     small_msg.innerHTML = `<i class="fa-solid fa-circle-info"></i> ${message}`;

//     formcontrol.className = "form-control error";
//   }

//   function setSuccessFor(input, message) {
//     const formcontrol = input.parentElement;
//     const small_msg = formcontrol.querySelector("small");
//     // console.log(small_msg);
//     // formcontrol.addEventListener("keyup",function(){
//     small_msg.innerHTML = "";
//     formcontrol.className = "form-control success";
//     // })
//   }
  
  //     if(!exist){
  //     // if(user_password==user_confirm_password){
  //
  //     a.push({ user_name,  user_email,user_password, user_confirm_password, user_mobile,unique_id,user_address});
  //     localStorage.setItem('user_list', JSON.stringify(a));
  //     // console.log(localStorage.getItem('user_list'));
  //     document.querySelector('form').reset();

  //     alert('Account created Successfully');
  //     location.href = "../../index.html";
  //     }
  //     // else{
  //     //     alert("invalid password");
  //     // }
/////////////////////////////////////////
//   if (!exist) {
//     if (
//       full_namevalue !== "" &&
//       !full_namespace.test(full_namevalue) &&
//       fullnamepattern.test(full_namevalue) &&
//       emailpattern.test(emailvalue) &&
//       emailvalue !== "" &&
//       !exist &&
//       mobile_numbervalue !== "" &&
//       passwordvalue !== "" &&
//       re_enter_passwordvalue !== "" &&
//       re_enter_passwordvalue == passwordvalue
//     ) {
//       let unique_id = uuidv4();
//       a.push({
//                     user_name: full_namevalue,
//                     user_email: emailvalue,
//                     user_mobile: mobile_numbervalue,
//                     user_password: passwordvalue,
//                     user_confirm_password: re_enter_passwordvalue,
//                     user_address: user_address,
//                     unique_id: unique_id,
//       });
//       localStorage.setItem("user_list", JSON.stringify(a));
//       document.querySelector("form").reset();
//       alert("Account created Successfully");
//       document.querySelector("form").reset();
//       window.location.href = "../../pages/login/login.html";
//   }
// };

// }
const signUP = (e) => {
  e.preventDefault();
const user_name = document.getElementById("name").value.trim();
const user_email = document.getElementById("email").value.trim();
const user_password = document.getElementById("password").value;
const user_confirm_password=document.getElementById("confirm_password").value;
const user_mobile = document.getElementById("mobilenumber").value.trim();
const user_address = document.getElementById("address").value.trim();

  let a = JSON.parse(localStorage.getItem("user_list")) || [];
  let exist =
    a.length &&
    JSON.parse(localStorage.getItem("user_list")).some(
      (data) => data.user_email.toLowerCase() == user_email.toLowerCase()
    );
  if (!exist) {
    if (user_password == user_confirm_password) {
            const unique_id = uuidv4();
      a.push({
        user_name,
        user_email,
        user_password,
        user_confirm_password,
        user_mobile,
        unique_id,
        user_address
      });
      localStorage.setItem("user_list", JSON.stringify(a));
      // console.log(localStorage.getItem('user_list'));
      document.querySelector("form").reset();
     
      alert("Account created Successfully");
      location.href = "../../pages/login/login.html";
    } else {
      alert("invalid password");
    }
  } else {
    alert("Sorry the User already Exist!! \n Try with different  email id");
  }
};
</script>
    <script src="../../pages/order/header.js"></script>
</html>