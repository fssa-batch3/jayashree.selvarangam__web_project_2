<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <title>Document</title>
    <style>
         * {
    box-sizing: border-box;
  }
  
  body {
    font-family: Arial, sans-serif;
    background-color: #f4f4f4;
    margin: 0;
  }
  
  .container {
    max-width: 600px;
    margin: 20px auto;
    background-color: #fff;
    border-radius: 5px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    padding: 20px;
  }
  
  h2 {
    text-align: center;
    margin-bottom: 20px;
  }
  
  .form-group {
    margin-bottom: 20px;
  }
  
  label {
    display: block;
    margin-bottom: 5px;
  }
  
  input[type="text"],
  input[type="url"],
  input[type="number"],
  select,
  textarea {
    width: 100%;
    padding: 10px;
    font-size: 16px;
    border-radius: 5px;
    border: none;
    border: 1px solid #ccc;
    margin-top: 5px;
  }
  
  input[type="submit"] {
    background-color: #4CAF50;
    color: #fff;
    border: none;
    padding: 10px 20px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 16px;
    margin-top: 20px;
  }
  
  input[type="submit"]:hover {
    background-color: #3e8e41;
  }
  
  select {
    height: 40px;
  }
  
  textarea {
    resize: vertical;
  }
  
  @media screen and (max-width: 768px) {
    .container {
      max-width: 100%;
    }
  }
  
    </style>
</head>
<body>
  <div class="container">
    <form name="add-product-form">
      <div class="form-group">
        <label for="product-name">Product Name:</label>
        <input type="text" id="product-name" name="product-name" >
      </div>
        
    
      <div class="form-group">
        <label for="category">Category:</label>
        <select type="text"  placeholder="select category" id="category" name="category">
          <option value="" selected disabled>Select Category</option>
          <!-- <option value="ESPRESSO">ESPRESSO</option>
          <option value="FRAPPUCINO">FRAPPUCINO</option>
          <option value="BREWED COFFEE">BREWED COFFEE</option>
          <option value="TEA">TEA</option>
          <option value="COLD BREW">COLD BREW</option> -->
          
      </select>
       </div>

       <div class="form-group">
        <label for="decription">decription:</label>
        <textarea type="text" id="description" name="description" ></textarea>
      </div>
        
      <div class="form-group">
        <label for="image_url">image_url:</label>
        <input type="text" id="image_url" name="image_url" >
      </div>

       <div class="form-group">
        <label for="tall_price">tall Price:</label>
        <input type="text" id="tall_price" name="tall_price" >
      </div>

      <div class="form-group">
        <label for="tall_quantity_value">Quantity in ml for tall:</label>
        <input type="number" id="tall_quantity_value" name="tall_quantity_value" >
      </div>

      <div class="form-group">
        <label for="tall_calorie_value">calories in kcal for tall:</label>
        <input type="number" id="tall_calorie_value" name="tall_calorie_value" >
      </div>


      <div class="form-group">
        <label for="medium_price">medium Price:</label>
        <input type="text" id="medium_price" name="medium_price" >
      </div>

      <div class="form-group">
        <label for="medium_quantity_value">Quantity in ml for medium:</label>
        <input type="number" id="medium_quantity_value" name="medium_quantity_value" >
      </div>

      <div class="form-group">
        <label for="medium_calorie_value">calories in kcal for medium:</label>
        <input type="number" id="medium_calorie_value" name="medium_calorie_value" >
      </div>

      <div class="form-group">
        <label for="short_price">short Price:</label>
        <input type="text" id="short_price" name="short_price" >
      </div>
    
      <div class="form-group">
        <label for="short_quantity_value">Quantity in ml for short:</label>
        <input type="number" id="short_quantity_value" name="short_quantity_value" >
      </div>

      <div class="form-group">
        <label for="short_calorie_value">calories in kcal for short:</label>
        <input type="number" id="short_calorie_value" name="short_calorie_value" >
      </div>


    

        <button type="submit" id="create">add product </button>
      </form>
      <button type="submit" style="display:none" id="update">update product </button>

      </div>
      <hr>
      <div class="row mt-5">
          <div class="col-12">
              <table class="table table-bordered">
                  <thead>
                      <td>Product_name</td>
                     
                     
                      <td>tall_Rs</td>
                      <td>short_Rs</td>
                      <td>medium_Rs</td>
                      <td>image_url</td>
                      <td>edit</td>
                      <td>delete</td>
                  </thead>
                  <tbody class="table_body"></tbody>
                  <!-- my method <tbody id="root"></tbody> -->
              </table>
          </div>
      </div>
</body>
<script src="https://cdn.jsdelivr.net/npm/uuid@8.3.2/dist/umd/uuidv4.min.js"></script>
<script>

const category_list = JSON.parse(localStorage.getItem('category'));
      console.log(category_list)
       for(let i=0;i<category_list.length;i++){
        const option = document.createElement("option");
        option.value = category_list[i].category_id;
        option.innerText = category_list[i].category;
        document.querySelector('#category').append(option);
       }
    // Get the form element
const addProductForm = document.forms["add-product-form"];
// Add an event listener to the form submit event
addProductForm.addEventListener("submit", function(event) {
  // Prevent the default form submission behavior
event.preventDefault();
  let category2 = document.getElementById('category').value
  // Get the form inputs
  const productNameInput = addProductForm["product-name"];
  const tallPriceInput = addProductForm["tall_price"];
  const mediumPriceInput = addProductForm["medium_price"];
  const shortPriceInput = addProductForm["short_price"];
  const categoryInput = addProductForm["category"];
  const tallQuantityInput = addProductForm["medium_quantity_value"];
  const tallCalorieInput = addProductForm["medium_calorie_value"];
  const mediumQuantityInput = addProductForm["medium_quantity_value"];
  const mediumCalorieInput = addProductForm["medium_calorie_value"];
  const shortQuantityInput = addProductForm["short_quantity_value"];
  const shortCalorieInput = addProductForm["short_calorie_value"];
  const descriptionInput = addProductForm["description"];
  const image_urlInput = addProductForm["image_url"];
  // 
  // Validate the inputs
  const productName = productNameInput.value.trim();
  const tallPrice = tallPriceInput.value.trim();
  const mediumPrice = mediumPriceInput.value.trim();
  const shortPrice = shortPriceInput.value.trim();
  const category1 = categoryInput.value.trim();
  const tallQuantity = tallQuantityInput.value.trim();
  const tallCalorie = tallCalorieInput.value.trim();
  const mediumQuantity = mediumQuantityInput.value.trim();
  const mediumCalorie = mediumCalorieInput.value.trim();
  const shortQuantity = shortQuantityInput.value.trim();
  const shortCalorie = shortCalorieInput.value.trim();
  const description = descriptionInput.value.trim();
  const image_url = image_urlInput.value.trim();
  if (productName === "") {
  showError(productNameInput, "Product name is required");
  return;
  }

  if (description === "") {
  showError(descriptionInput, "description is required");
  return;
}

  if (image_url === "") {
  showError(image_urlInput, "image_url is required");
  return;
  }

  if (isNaN(tallPrice) || tallPrice === "") {
    showError(tallPriceInput, "Price must be a number");
    return;
  }

  if (parseFloat(tallPrice) <= 0) {
    showError(tallPriceInput, "Price must be greater than zero");
    return;
  }
  
  if (isNaN(mediumPrice) || mediumPrice === "") {
    showError(mediumPriceInput, "Price must be a number");
    return;
  }

  if (parseFloat(mediumPrice) <= 0) {
    showError(mediumPriceInput, "Price must be greater than zero");
    return;
  }

  if (isNaN(shortPrice) || shortPrice === "") {
    showError(shortPriceInput, "Price must be a number");
    return;
  }

  if (parseFloat(shortPrice) <= 0) {
    showError(shortPriceInput, "Price must be greater than zero");
    return;
  }
  /////
  if (isNaN(tallQuantity) || tallQuantity === "") {
    showError(tallQuantityInput, "quantity must be a number");
    return;
  }

  if (parseFloat(tallQuantity) <= 0) {
    showError(tallQuantityInput, "quantity must be greater than zero");
    return;
  }
//   if(tallQuantity>shortQuantity&&tallQuantity>mediumQuantity ){
//   showError(tallQuantityInput, "quantity must be greater than short quantity");
//   return;
// }

  if (isNaN(tallCalorie) || tallCalorie === "") {
    showError(tallCalorieInput, "calorie must be a number");
    return;
  }
//   if(tallCalorie>shortCalorie&&tallCalorie>mediumCalorie ){
//   showError(tallCalorieInput,"calorie must be greater than short quantity");
//   return;
// }

  if (parseFloat(tallCalorie) <= 0) {
    showError(tallCalorieInput, "calorie must be greater than zero");
    return;
  }
  ////
  if (isNaN(mediumQuantity) || mediumQuantity === "" ) {
    showError(mediumQuantityInput, "quantity must be a number");
    return;
  }
// if( mediumQuantity> shortQuantity&& mediumQuantity < tallQuantity ){
//   showError(mediumQuantityInput, "quantity must be greater than short quantity");
//   return;
// }

// if( mediumCalorie > shortCalorie && mediumCalorie < tallCalorie){
//   showError(mediumCalorieInput, "quantity must be greater than short quantity");
//   return;
// }


  if (parseFloat(mediumQuantity) <= 0) {
    showError(mediumQuantityInput, "quantity must be greater than zero");
    return;
  }

  if (isNaN(mediumCalorie) || mediumCalorie === "") {
    showError(mediumCalorieInput, "calorie must be a number");
    return;
  }

  if (parseFloat(mediumCalorie) <= 0) {
    showError(mediumCalorieInput, "calorie must be greater than zero");
    return;
  }
 //// 
  if (isNaN(shortQuantity) || shortQuantity === "") {
    showError(shortQuantityInput, "quantity must be a number");
    return;
  }
//   if(shortQuantity<tallQuantity&&shortQuantity<mediumQuantity ){
//   showError(shortQuantityInput, "quantity must be greater than short quantity");
//   return;
// }

// if(shortCalorie<tallCalorie || shortCalorie<mediumCalorie){
//   showError(shortCalorieInput, "calorie must be lesser than other quantity");
//   return;
// }

  if (parseFloat(shortQuantity) <= 0) {
    showError(shortQuantityInput, "quantity must be greater than zero");
    return;
  }


  if (isNaN(shortCalorie) || shortCalorie === "") {
    showError(shortCalorieInput, "calorie must be a number");
    return;
  }

  if (parseFloat(shortCalorie) <= 0) {
    showError(shortCalorieInput, "calorie must be greater than zero");
    return;
  }




  if(category === ""){
    showError(categoryInput,"category is required")
    return;
  }

  let select_product_value = document.getElementById('category');
  const category_value = select_product_value.value;
//  const category_name =select_product_value.innerText;

  // If all inputs are valid, submit the form

  const product_detail_list_1 = JSON.parse(
       localStorage.getItem("pro")
  )||[];
     const exist =
       product_detail_list_1.length &&
       JSON.parse(localStorage.getItem("product_detail_list")).some(
         (data) => data.productName.toLowerCase() == productName.toLowerCase()
       );
     if (!exist) {
       const product_detail = {
        'name':productName,
        'price_1':{
          'tall':tallPrice,
         'medium':mediumPrice,
        'short':shortPrice
        },
       
        'category_id':category_value,
       'image':{
        'src':image_url
       },
         'quantities': {
          'tall': {
             'name': "tall",
             'quantity': tallQuantity,
             'unit': "ml",
            ' calories': tallCalorie,
             'calories_unit': "kcal",
           },
           'medium': {
            'name': "medium",
             'quantity': mediumQuantity,
             'unit': "ml",
             'calories': mediumCalorie,
             'calories_unit': "kcal",
           },
           'short': {
             'name': "short",
             'quantity': shortQuantity,
             'unit': "ml",
             'calories': shortCalorie,
             'calories_unit': "kcal",
           }
         },
         'product_id':uuidv4()
        };
       product_detail_list_1.push(product_detail);
       localStorage.setItem(
         "product_detail_list",
         JSON.stringify(product_detail_list_1)
       );
      
     } else {
       alert("product already exists");
     }
addProductForm.submit();

}
)

// Helper function to show an error message for a form input
function showError(input, errorMessage) {
  // Set the input as invalid
  input.setCustomValidity(errorMessage);

  // Display the error message
  const errorElement = document.createElement("div");
  errorElement.className = "error-message";
  errorElement.textContent = errorMessage;
  input.parentNode.insertBefore(errorElement, input.nextSibling);

  // Add a listener to remove the error message when the input is changed
  input.addEventListener("input", function() {
    input.setCustomValidity("");
    errorElement.remove();
  });
}
const product_detail_list_1 = JSON.parse(
  localStorage.getItem("product_detail_list")
);

   for (let i = 0; i < product_detail_list_1.length; i++) {
     const table_data = create(product_detail_list_1[i]);
     document.querySelector("tbody.table_body").append(tr);
   }
function create(prod) {
     // tr
     tr = document.createElement("tr");
     // // // // console.log(tr);
     // td 1
     // td1 = document.createElement("td");
     // td1.innerText = ;
     // tr.append(td1);
     // td 2
     td2 = document.createElement("td");
     td2.innerText = prod.name;
     tr.append(td2);
     // td 3
    //  td3 = document.createElement("td");
    //  td3.innerText = prod.description;
    //  tr.append(td3);

     // td 4
     // td4 = document.createElement("td");
     // td4.innerText = prod["price"];
     // tr.append(td4);
     // td 5
    //  td5 = document.createElement("td");
    //  td5.innerText = prod.category;
    //  tr.append(td5);
     // a update
     // td11 = document.createElement("td");
     // td11.innerText = prod["quantities"]["name"];
     // tr.append(td11);

     // td12 = document.createElement("td");
     // td12.innerText = prod["quantities"]["quantity"];
     // tr.append(td12);

     // td13 = document.createElement("td");
     // td13.innerText = prod["quantities"]["calories"];
     // tr.append(td13);

     // a update
    //  console.log(prod.price_1[tall])
    console.log(prod.price_1['tall']);
     td17 = document.createElement("td");
     td17.innerText = prod.price_1.tall;
     tr.append(td17);

     td15 = document.createElement("td");
     td15.innerText = prod.price_1.medium;
     tr.append(td15);

     td16 = document.createElement("td");
     td16.innerText = prod.price_1.short;
     tr.append(td16);
// console.log(prod.price_1[short])
     td14 = document.createElement("td");
     td14.innerText = prod.image.src;
     tr.append(td14);

     td6 = document.createElement("td");
     tr.append(td6);
     // a update
     butup = document.createElement("button");
     butup.setAttribute("data-id", prod.product_id);
     butup.setAttribute("class", "edit");
     butup.innerText = "EDIT";
     td6.append(butup);
     // a delete
     td7 = document.createElement("td");
     tr.append(td7);
     // a delete
     butdel = document.createElement("button");
     butdel.setAttribute("class", "delete");
     butdel.setAttribute("data-uid", prod.product_id);
     butdel.innerText = "DELETE";
     td7.append(butdel);
   }


   const edit = document.querySelectorAll(".edit");
       edit.forEach(function (findId) {
         findId.addEventListener("click", function () {
           const uniqueId = this.dataset.id;
           localStorage.setItem("product_id", JSON.stringify(uniqueId));

           const unique_id = JSON.parse(localStorage.getItem("product_id"));
           console.log(unique_id)
           const product_detail_list = JSON.parse(
       localStorage.getItem("product_detail_list")
           );

           function findProduct(e) {
             return e.product_id === unique_id;
           }

           productData = product_detail_list.find(findProduct);
           console.log(productData);



             
           document.getElementById("product-name").value = productData.name;
           document.getElementById("category").value = productData.category;
           document.getElementById("description").value = productData.description;
           // document.getElementById("cost").value = productData["price"];
    
           // document.getElementById("size_name").value = productData["quantities"]["name"];
          //  console.log(productData['quantities']['"tall1"']['calories'])
           document.getElementById("tall_quantity_value").value =
             productData.quantities.tall.quantity;
           document.getElementById("tall_calorie_value").value =
             productData.quantities.tall.calories;
    
           document.getElementById("medium_quantity_value").value =
             productData.quantities.medium.quantity;

           document.getElementById("medium_calorie_value").value =
             productData.quantities.medium.calories;
    
           document.getElementById("short_quantity_value").value =
             productData.quantities.short.quantity;
           document.getElementById("short_calorie_value").value =
             productData.quantities.short.calories;
    
           document.getElementById("tall_price").value = productData.price_1.tall;
           document.getElementById("medium_price").value = productData.price_1.medium;
           document.getElementById("short_price").value = productData.price_1.short;
           document.getElementById("image_url").value = productData.image.source;
    
           document.querySelector("#update").setAttribute("style", "display:inline");
           document.querySelector("#create").setAttribute("style", "display:none");
      });
       });
    
       const update = document.querySelector("#update");
       update.addEventListener("click", update_product);
       function update_product() {
        event.preventDefault();
         const unique_id = JSON.parse(localStorage.getItem("product_id"));
         const product_detail_list = JSON.parse(
        localStorage.getItem("product_detail_list")
      );
         function findProduct(e) {
           return e.product_id == unique_id;
         }
         productData = product_detail_list.find(findProduct);


  const productNameInput = addProductForm["product-name"];
  const tallPriceInput = addProductForm["tall_price"];
  const mediumPriceInput = addProductForm["medium_price"];
  const shortPriceInput = addProductForm["short_price"];
  const categoryInput = addProductForm["category"];
  const tallQuantityInput = addProductForm["medium_quantity_value"];
  const tallCalorieInput = addProductForm["medium_calorie_value"];
  const mediumQuantityInput = addProductForm["medium_quantity_value"];
  const mediumCalorieInput = addProductForm["medium_calorie_value"];
  const shortQuantityInput = addProductForm["short_quantity_value"];
  const shortCalorieInput = addProductForm["short_calorie_value"];
  const descriptionInput = addProductForm["description"];
  const image_urlInput = addProductForm["image_url"];
  // 
  // Validate the inputs
  const productName = productNameInput.value.trim();
  const tallPrice = tallPriceInput.value.trim();
  const mediumPrice = mediumPriceInput.value.trim();
  const shortPrice = shortPriceInput.value.trim();
  const category = categoryInput.value.trim();
  const tallQuantity = tallQuantityInput.value.trim();
  const tallCalorie = tallCalorieInput.value.trim();
  const mediumQuantity = mediumQuantityInput.value.trim();
  const mediumCalorie = mediumCalorieInput.value.trim();
  const shortQuantity = shortQuantityInput.value.trim();
  const shortCalorie = shortCalorieInput.value.trim();
  const description = descriptionInput.value.trim();
  const image_url = image_urlInput.value.trim();

  if (productName === "") {
  showError(productNameInput, "Product name is required");
  return;
  }

  if (description === "") {
  showError(descriptionInput, "description is required");
  return;
  }

  if (image_url === "") {
  showError(image_urlInput, "image_url is required");
  return;
  }

  if (isNaN(tallPrice) || tallPrice === "") {
    showError(tallPriceInput, "Price must be a number");
    return;
  }

  if (parseFloat(tallPrice) <= 0) {
    showError(tallPriceInput, "Price must be greater than zero");
    return;
  }
  
  if (isNaN(mediumPrice) || mediumPrice === "") {
    showError(mediumPriceInput, "Price must be a number");
    return;
  }

  if (parseFloat(mediumPrice) <= 0) {
    showError(mediumPriceInput, "Price must be greater than zero");
    return;
  }

  if (isNaN(shortPrice) || shortPrice === "") {
    showError(shortPriceInput, "Price must be a number");
    return;
  }

  if (parseFloat(shortPrice) <= 0) {
    showError(shortPriceInput, "Price must be greater than zero");
    return;
  }
  /////
  if (isNaN(tallQuantity) || tallQuantity === "") {
    showError(tallQuantityInput, "quantity must be a number");
    return;
  }

  if (parseFloat(tallQuantity) <= 0) {
    showError(tallQuantityInput, "quantity must be greater than zero");
    return;
  }

  if (isNaN(tallCalorie) || tallCalorie === "") {
    showError(tallCalorieInput, "calorie must be a number");
    return;
  }

  if (parseFloat(tallCalorie) <= 0) {
    showError(tallCalorieInput, "calorie must be greater than zero");
    return;
  }

  ////
  if (isNaN(mediumQuantity) || mediumQuantity === "") {
    showError(mediumQuantityInput, "quantity must be a number");
    return;
  }

  if (parseFloat(mediumQuantity) <= 0) {
    showError(mediumQuantityInput, "quantity must be greater than zero");
    return;
  }

  if (isNaN(mediumCalorie) || mediumCalorie === "") {
    showError(mediumCalorieInput, "calorie must be a number");
    return;
  }

  if (parseFloat(mediumCalorie) <= 0) {
    showError(mediumCalorieInput, "calorie must be greater than zero");
    return;
  }
 //// 
  if (isNaN(shortQuantity) || shortQuantity === "") {
    showError(shortQuantityInput, "quantity must be a number");
    return;
  }

  if (parseFloat(shortQuantity) <= 0) {
    showError(shortQuantityInput, "quantity must be greater than zero");
    return;
  }


  if (isNaN(shortCalorie) || shortCalorie === "") {
    showError(shortCalorieInput, "calorie must be a number");
    return;
  }

  if (parseFloat(shortCalorie) <= 0) {
    showError(shortCalorieInput, "calorie must be greater than zero");
    return;
  }




  if(category === ""){
    showError(categoryInput,"category is required")
    return;
  }








        //  // // // // // console.log(productData)
        //  const category = document.getElementById("category").value;
        //  // let category_description = document.getElementById("category_description").value;
        //  const name = document.getElementById("product-name").value;
        //  // let size_name = document.getElementById("size_name").value;
        //  const quantity_value1 = document.getElementById("tall_quantity_value").value;
        //  // let quantity_unit = document.getElementById("quantity_unit").value;
        //  const calories_value1 = document.getElementById("tall_calorie_value").value;
        //  const quantity_value2 = document.getElementById("medium_quantity_value").value;
        //  // let quantity_unit = document.getElementById("quantity_unit").value;
        //  const calories_value2 = document.getElementById("medium_calorie_value").value;
        //  const quantity_value3 = document.getElementById("short_quantity_value").value;
        //  // let quantity_unit = document.getElementById("quantity_unit").value;
        //  const calories_value3 = document.getElementById("short_calorie_value").value;
        //  // let calories_unit = document.getElementById("calories_unit").value;
        //  const image_url = document.getElementById("image_url").value;
        //  const description = document.getElementById("description").value;
        //  // let cost = document.getElementById("cost").value;
        //  const tall = document.getElementById("tall_price").value;
        //  const short = document.getElementById("short_price").value;
        //  const medium = document.getElementById("medium_price").value;
    
      productData.name = productName;
         productData.category = category;
         productData.description = description;
         // productData["price"] = cost;
         // productData["quantities"]["name"] = size_name;
         productData.quantities.tall.quantity = tallQuantity;
         productData.quantities.tall.calories = tallCalorie;
         productData.quantities.medium.quantity = mediumQuantity;
         productData.quantities.medium.calories = mediumCalorie;
         productData.quantities.short.quantity = shortQuantity;
         productData.quantities.short.calories = shortCalorie;
         productData.price_1.tall = tallPrice;
         productData.price_1.medium = mediumPrice;
         productData.price_1.short = shortPrice;
         productData.image.src = image_url;
    
         localStorage.setItem("product_detail_list",JSON.stringify(product_detail_list));
         location.reload();
       }



   




   const delete_product = document.querySelectorAll("button.delete");
       delete_product.forEach(function (findUid) {
        findUid.addEventListener("click", function () {
           console.log(1)
           const uniqueId = this.dataset.uid;
           localStorage.setItem("product_id", JSON.stringify(uniqueId));
           const unique_id = JSON.parse(localStorage.getItem("product_id"));
           const product_detail_list = JSON.parse(
             localStorage.getItem("product_detail_list")
           );
           function findProduct(e) {
             return e.product_id == unique_id;
           }
           productData = product_detail_list.find(findProduct);
    
           const indexOfUser = product_detail_list.indexOf(productData);
           product_detail_list.splice(indexOfUser, 1);
    
           // // // // console.log(indexOfUser);
           localStorage.setItem(
             "product_detail_list",
             JSON.stringify(product_detail_list)
           );
        location.reload();
         });
       });

</script>
</html>